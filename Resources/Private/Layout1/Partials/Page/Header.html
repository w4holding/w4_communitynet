{namespace v=FluidTYPO3\Vhs\ViewHelpers}

<f:variable name="rootline" value="{v:page.rootline()}" />
<f:variable name="pageinfo" value="{v:page.info(pageUid : '{rootline.0.uid}')}" />
<f:render partial="Schema" arguments="{_all}" />
<nav class="navbar navbar-expand-xll fixed-top">
    <div class="navbar-top">
        <div class="container-lg">
            <div class="navbar-top--items" id="navbar-top--items">
                <f:if condition="{pageinfo.tx_w4communitynet_search}">
                    <f:if condition="{searchboxintopbarenabled}">
                        <f:then>
                            <form method="post" id="tx_indexedsearch_top" action="{f:uri.page(pageUid: '{pageinfo.tx_w4communitynet_search}', additionalParams: '{tx_indexedsearch_pi2: {action: \'search\', controller: \'Search\'}}')}">
                                <fieldset>
                                    <div class="form-group">
                                        <input id="tx-indexedsearch-searchbox-button-submit" type="submit" value="{f:translate(key: 'LLL:EXT:w4_communitynet/Resources/Private/Language/locallang.xlf:search')}"
                                            name="tx_indexedsearch_pi2[search][submitButton]" />
                                        <input placeholder="{f:translate(key: 'LLL:EXT:w4_communitynet/Resources/Private/Language/locallang.xlf:searchPlaceholder')}" class="form-control" id="tx-indexedsearch-searchbox-word" type="text"
                                            name="tx_indexedsearch_pi2[search][sword]" value="" />
                                    </div>
                                </fieldset>
                            </form>
                        </f:then>
                        <f:else>
                            <f:link.typolink parameter="{pageinfo.tx_w4communitynet_search}">
                                <i class="icon-search"></i>
                            </f:link.typolink>
                        </f:else>
                    </f:if>
                </f:if>
                <f:if condition="{pageinfo.tx_w4communitynet_loginpage}">
                    <f:link.typolink parameter="{pageinfo.tx_w4communitynet_loginpage}">
                       <i class="icon-user"></i>
                    </f:link.typolink>
                </f:if>
                <f:if condition="{pageinfo.tx_w4communitynet_cart}">
                    <f:link.typolink parameter="{pageinfo.tx_w4communitynet_cart}" class="cart-link">
                        <span class="mini-cart-total-items-items">&nbsp;&nbsp;</span>
                        <i class="icon-basket"></i>
                    </f:link.typolink>
                </f:if>
            </div>
        </div>
    </div>
    <div class="container-lg">
        <div class="navbar-bottom">
            <a class="navbar-brand" href="/" id="logo">
                <v:resource.record.fal table="pages" field="tx_w4communitynet_logo" uid="1" as="resources">
                    <f:if condition="{resources.0.url}" >
                        <img src="{resources.0.url}" class="image-embed-item" alt="{pageinfo.tx_w4communitynet_logoname} {pageinfo.tx_w4communitynet_logosubname}" />
                    </f:if>
                </v:resource.record.fal>
                <span>
                    <strong>{pageinfo.tx_w4communitynet_logoname}</strong><br />{pageinfo.tx_w4communitynet_logosubname}
                </span>
            </a>
            <button class="navbar-toggler collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#site-header-menu" aria-controls="site-header" aria-expanded="false" aria-label="Toggle navigation">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
        </div>
        <div class="collapse navbar-collapse" id="site-header-menu">
            <ul class="navbar-nav">
                <v:page.menu as="menu">
                    <f:render partial="Menu" arguments="{menu:menu}"/>
                </v:page.menu>
            </ul>
        </div>
    </div>
    <f:if condition="{quicklinks}">
        <v:menu.list pages="{quicklinks}">
            <f:if condition="!{isHome}">
                <ul class="side-contact-bar" id="side-contact-bar">
                    <f:for each="{menu}" as="menuPage" iteration="iteration">                
                        <li class="item-desktop item-desktop-{iteration.cycle} {menuPage.tx_w4communitynet_icon_class}">
                            <a href="{menuPage.link}" target="{menuPage.target}" title="{menuPage.linktext}">
                                {menuPage.linktext}
                            </a>
                        </li>
                        <li class="item-mobile">
                            <a href="{menuPage.link}" target="{menuPage.target}" title="{menuPage.title}">
                                {menuPage.linktext}
                            </a>
                        </li>
                    </f:for>
                </ul>
            </f:if>
            <f:spaceless>
                <div id="top-contact-bar">
                    <ul class="items-{menu -> f:count()} container">
                        <f:for each="{menu}" as="menuPage">	
                            <li class="{menuPage.tx_w4communitynet_icon_class}">
                                <a href="{menuPage.link}" target="{menuPage.target}" title="{menuPage.title}">
                                    <span>
                                        <f:if condition="{menuPage.nav_title}">
                                            <f:then>
                                                {menuPage.nav_title}
                                            </f:then>
                                            <f:else>
                                                {menuPage.title}
                                            </f:else>
                                        </f:if>
                                    </span>
                                </a>
                            </li>
                        </f:for>
                    </ul>
                </div>
            </f:spaceless>
        </v:menu.list>
    </f:if>
</nav>
